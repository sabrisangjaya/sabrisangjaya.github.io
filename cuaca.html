<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sabri Sangjaya - Cuaca</title>
	
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script src="js/jquery.min.js" type="text/javascript"></script>
	<script src="js/popper.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.min.js" type="text/javascript"></script>
	<link rel="stylesheet" href="cuaca/css/all.min.css">
	<script src="cuaca/js/all.js" type="text/javascript"></script>

		
		<meta name="description" content="Web Developer and Machine Learning Enthusiasts">
		<meta name="keywords" content="web,developer,designer,resume,cv,sabri,sangjaya,machine,learning,data,scientist" />
		<meta name="author" content="Sabri Sangjaya">
		<meta property="og:image:alt" content="Sabri Sangjaya">
		<meta property="og:locale" content="en_ID">
		<meta name="theme-color" content="#007bff">
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://sabrisangjaya.github.io/cuaca.html">
		<meta property="og:title" content="Sabri Sangjaya - Cuaca">
		<meta property="og:description" content="Web Developer and Machine Learning Enthusiasts">
		<meta property="og:image" content="https://sabrisangjaya.github.io/img/webpreview.jpg">
		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image">
		<meta property="twitter:url" content="https://sabrisangjaya.github.io/cuaca.html">
		<meta property="twitter:title" content="Sabri Sangjaya - Cuaca">
		<meta property="twitter:description" content="Web Developer and Machine Learning Enthusiasts">
		<meta property="twitter:image" content="https://sabrisangjaya.github.io/img/webpreview.jpg">
		<link rel="icon" href="img/logo.svg" sizes="any" type="image/svg+xml">
		<link rel="canonical" href="https://sabrisangjaya.github.io/cuaca.html">
		<link rel="alternate" href="https://sabrisangjaya.github.io/cuaca.html" hreflang="en-id" />


		<link rel="apple-touch-icon" href="icon/hello-icon-152.png">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-title" content="Sabri Sangjaya">
		<meta name="msapplication-TileImage" content="icon/hello-icon-144.png">
		<meta name="msapplication-TileColor" content="#FFFFFF">



	<style>
		.card-day{
			background-image: url("cuaca/cerah-berawan-siang.jpg");
			background-repeat: no-repeat;
			background-size: cover;
			background-position: center center;
			color: white;

		}
		.card-night{
			background-image: url("cuaca/cerah-berawan-malam.jpg");
			background-repeat: no-repeat;
			background-size: cover;
			background-position: center center;
			color: white;
		}


	
	</style>
</head>
<body>
	<br/>
	<script>
		function getDateTime(isodate) {
		var now     = new Date(isodate);
		var year    = now.getFullYear();
		var day     = now.getDate();
		var hour    = now.getHours();
		var minute  = now.getMinutes();
		var second  = now.getSeconds();
		var weekday = new Array(7);
		weekday[0] = "Sunday";
		weekday[1] = "Monday";
		weekday[2] = "Tuesday";
		weekday[3] = "Wednesday";
		weekday[4] = "Thursday";
		weekday[5] = "Friday";
		weekday[6] = "Saturday";
		var month = new Array();
		month[0] = "January";
		month[1] = "February";
		month[2] = "March";
		month[3] = "April";
		month[4] = "May";
		month[5] = "June";
		month[6] = "July";
		month[7] = "August";
		month[8] = "September";
		month[9] = "October";
		month[10] = "November";
		month[11] = "December";
		var bulan= month[now.getMonth()];
		var hari = weekday[now.getDay()];
		if(day.toString().length == 1) {
			day = '0'+day;
		}
		if(hour.toString().length == 1) {
			hour = '0'+hour;
		}
		if(minute.toString().length == 1) {
			minute = '0'+minute;
		}
		if(second.toString().length == 1) {
			second = '0'+second;
		}
		var dateTime = '<span class="far fa-calendar"></span> '+hari+', '+day+' '+bulan+' '+year+'<br/><span class="fas fa-clock"></span> '+hour+':'+minute+':'+second+' WIB / GMT+7';
		return dateTime;
	}



		var xhr = new XMLHttpRequest();
		// xhr.open('GET','cuaca/DigitalForecast-JawaTimur.xml',true);
		xhr.open('GET','https://data.bmkg.go.id/DataMKG/MEWS/DigitalForecast/DigitalForecast-JawaTimur.xml',true);
		xhr.responseType='document';
		xhr.onload=function() {
			var status=xhr.status;
			if(status===200){
				var datakota=xhr.response.getElementById("501290");
				// console.log(datakota);
				var suhu=datakota.querySelector("[description='Temperature']");
				var kelembapan=datakota.querySelector("[description='Humidity']");
				var cuaca=datakota.querySelector("[description='Weather']");
				var arahangin=datakota.querySelector("[description='Wind direction']");
				var kecepatanangin=datakota.querySelector("[description='Wind speed']");
				var dictdata={};
				for (var i = 0; i < suhu.children.length; i++) {
					var jamData = suhu.children[i].getAttribute("datetime");
					var tempC=suhu.children[i].querySelector("[unit='C']").innerHTML;
					var tempF=suhu.children[i].querySelector("[unit='F']").innerHTML;
					var stringdate=jamData.slice(0,4)+"-"+jamData.slice(4,6)+"-"+jamData.slice(6,8)+"T"+jamData.slice(8,10)+":"+jamData.slice(10,12)+":00.000+07:00";
					dictdata[stringdate]={};
					dictdata[stringdate]["isoDate"]=stringdate;
					dictdata[stringdate]["tempC"]=tempC;
					dictdata[stringdate]["tempF"]=tempF;
					var humidity=kelembapan.children[i].querySelector("[unit='%']").innerHTML;
					dictdata[stringdate]["humidity"]=humidity;
					var weather=cuaca.children[i].querySelector("[unit='icon']").innerHTML;
					dictdata[stringdate]["cuaca"]=weather;
					var wd_card=arahangin.children[i].querySelector("[unit='CARD']").innerHTML;
					var wd_deg=arahangin.children[i].querySelector("[unit='deg']").innerHTML;
					dictdata[stringdate]["wd_deg"]=wd_deg;
					dictdata[stringdate]["wd_card"]=wd_card;
					var ws_KPH=kecepatanangin.children[i].querySelector("[unit='KPH']").innerHTML;
					dictdata[stringdate]["ws_kph"]=ws_KPH;

				}
				var weathercontent="";
				Object.keys(dictdata).forEach(function(key){
					weathercontent+='<div class="col-md-6">';
					if(dictdata[key]["isoDate"].slice(11,13)=="06" || dictdata[key]["isoDate"].slice(11,13)=="12"){
						weathercontent+='<div class="card card-day" style="margin-bottom: 10px;">';
					}
					else if(dictdata[key]["isoDate"].slice(11,13)=="00" || dictdata[key]["isoDate"].slice(11,13)=="18"){
						weathercontent+='<div class="card card-night" style="margin-bottom: 10px;">';
					}
					


					weathercontent+='<div class="card-body">';
					weathercontent+='<div style="text-align:center">';
					weathercontent+=getDateTime(dictdata[key]["isoDate"])+"<br/><br/>";
					if(dictdata[key]["cuaca"]==0){
						
						if(dictdata[key]["isoDate"].slice(11,13)=="06" || dictdata[key]["isoDate"].slice(11,13)=="12"){
							weathercontent+='<span class="fa fa-sun fa-5x"></span><br/>';
						}
						else if(dictdata[key]["isoDate"].slice(11,13)=="00" || dictdata[key]["isoDate"].slice(11,13)=="18"){
							weathercontent+='<span class="fa fa-moon fa-5x"></span><br/>';
						}
						weathercontent+='Cerah / Clear Skies';
					}
					else if(dictdata[key]["cuaca"]==1){
						if(dictdata[key]["isoDate"].slice(11,13)=="06" || dictdata[key]["isoDate"].slice(11,13)=="12"){
						weathercontent+='<span class="fa fa-cloud-sun fa-5x"></span><br/>';
						}
						else if(dictdata[key]["isoDate"].slice(11,13)=="00" || dictdata[key]["isoDate"].slice(11,13)=="18"){
							weathercontent+='<span class="fa fa-cloud-moon fa-5x"></span><br/>';
						}
						weathercontent+='Cerah Berawan / Partly Cloudy';
					}
					else if(dictdata[key]["cuaca"]==2){
						if(dictdata[key]["isoDate"].slice(11,13)=="06" || dictdata[key]["isoDate"].slice(11,13)=="12"){
						weathercontent+='<span class="fa fa-clouds-sun fa-5x"></span><br/>';
						}
						else if(dictdata[key]["isoDate"].slice(11,13)=="00" || dictdata[key]["isoDate"].slice(11,13)=="18"){
							weathercontent+='<span class="fa fa-clouds-moon fa-5x"></span><br/>';
						}
						weathercontent+='Cerah Berawan / Partly Cloudy';
					}
					else if(dictdata[key]["cuaca"]==3){
						weathercontent+='<span class="fa fa-cloud fa-5x"></span><br/>';
						weathercontent+='Berawan / Mostly Cloudy';
					}
					else if(dictdata[key]["cuaca"]==4){
						weathercontent+='<span class="fa fa-clouds fa-5x"></span><br/>';
						weathercontent+='Berawan Tebal / Overcast';
					}
					else if(dictdata[key]["cuaca"]==5){
						if(dictdata[key]["isoDate"].slice(11,13)=="06" || dictdata[key]["isoDate"].slice(11,13)=="12"){
						weathercontent+='<span class="fa fa-sun-haze fa-5x"></span><br/>';
						}
						else if(dictdata[key]["isoDate"].slice(11,13)=="00" || dictdata[key]["isoDate"].slice(11,13)=="18"){
							weathercontent+='<span class="fa fa-fog fa-5x"></span><br/>';
						}
						weathercontent+='Udara Kabur / Haze';
					}
					else if(dictdata[key]["cuaca"]==10){
						weathercontent+='<span class="fa fa-smoke fa-5x"></span><br/>';
						weathercontent+='Asap / Smoke';
					}
					else if(dictdata[key]["cuaca"]==45){
						weathercontent+='<span class="fa fa-fog fa-5x"></span><br/>';
						weathercontent+='Kabut / Fog';
					}
					else if(dictdata[key]["cuaca"]==60){
						weathercontent+='<span class="fa fa-cloud-rain fa-5x"></span><br/>';
						weathercontent+='Hujan Ringan / Light Rain';
					}
					else if(dictdata[key]["cuaca"]==61){
						weathercontent+='<span class="fa fa-cloud-showers fa-5x"></span><br/>';
						weathercontent+='Hujan Sedang / Rain';
					}
					else if(dictdata[key]["cuaca"]==63){
						weathercontent+='<span class="fa fa-cloud-showers-heavy fa-5x"></span><br/>';
						weathercontent+='Hujan Lebat / Heavy Rain';
					}
					else if(dictdata[key]["cuaca"]==80){
						weathercontent+='<span class="fa fa-cloud-showers fa-5x"></span><br/>';
						weathercontent+='Hujan Lokal / Isolated Rain';
					}
					else if(dictdata[key]["cuaca"]==95){
						if(dictdata[key]["isoDate"].slice(11,13)=="06" || dictdata[key]["isoDate"].slice(11,13)=="12"){
						weathercontent+='<span class="fa fa-thunderstorm-sun fa-5x"></span><br/>';
						}
						else if(dictdata[key]["isoDate"].slice(11,13)=="00" || dictdata[key]["isoDate"].slice(11,13)=="18"){
							weathercontent+='<span class="fa fa-thunderstorm-moon fa-5x"></span><br/>';
						}
						weathercontent+='Hujan Petir / Severe Thunderstorm';
					}
					else if(dictdata[key]["cuaca"]==97){
						weathercontent+='<span class="fa fa-thunderstorm fa-5x"></span><br/>';
						weathercontent+='Hujan Petir / Severe Thunderstorm';
					}
					
					
					
					weathercontent+='</div><br/><br/>';
					weathercontent+='<span class="fa fa-temperature-low"></span> ';
					weathercontent+=dictdata[key]["tempC"]+"°C | "+dictdata[key]["tempF"]+"°F<br/>";
					weathercontent+='<span class="fa fa-humidity"></span> ';
					weathercontent+=dictdata[key]["humidity"]+"%<br/>";
					weathercontent+='<span class="fa fa-wind"></span> ';
					weathercontent+=dictdata[key]["ws_kph"]+" km/jam<br/>";
					var derajat=parseFloat(dictdata[key]["wd_deg"])+135;
					weathercontent+='<span class="fa fa-location-arrow" data-fa-transform="rotate-'+derajat+'"></span> ';
					// console.log(derajat);
					weathercontent+=dictdata[key]["wd_card"]+"<br/>";
					weathercontent+='</div>';
					weathercontent+='</div>';
					weathercontent+='</div>';
				});
				document.getElementById("weather").insertAdjacentHTML('beforeend',weathercontent);
			}
			else{
				console.log("error");
			}
		}
		xhr.send();
	</script>
	

	<div class="container">
		<div class="row">
			<div class="col-md-6" style="margin-bottom:10px;">
				<img src="img/malang.jpg" class="img-fluid" alt="cuaca sabrisangjaya">	
			</div>
			<div class="col-md-6" style="margin-bottom:10px;">
					<div class="card">
						<div class="card-body">
							
							<p>Aplikasi web prakiraan cuaca Kota Malang dalam waktu 3 harian. Data diambil dari <a href="https://data.bmkg.go.id/prakiraan-cuaca/" target="_blank" rel="noreferrer nofollow">BMKG (Badan Meteorologi,Klimatologi, dan Geofisika)</a>.<br/>
							</p>
							<a href="#" data-toggle="modal" data-target="#modal" class="badge badge-primary"><span class="fa fa-question-circle"></span> Panduan aplikasi</a> <a href='#' class='badge badge-primary'><span id="digital-clock"></span> </a> 

							
						</div>
					</div>
					<div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				Keterangan: <br/>
							<span class="fa fa-temperature-low"></span> Suhu dalam celcius dan farenheit <br/>
							<span class="fa fa-humidity"></span> Kelembapan<br/>
							<span class="fa fa-wind"></span>  Kecepatan angin<br/>
							<span class="fa fa-location-arrow"></span> Arah angin(dari)
							<hr/>
							<table class="table table-bordered">
		<tr>
			<td>1.</td>
			<td>Utara</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-135'></span></td>
			<td>North</td>
			<td>N</td>
		</tr>
		<tr>
			<td>2.</td>
			<td>Utara Timur Langit</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-157.5'></span></td>
			<td>North Northeast</td>
			<td>NNE</td>
		</tr>
		<tr>
			<td>3.</td>
			<td>Timur Laut</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-180'></span></td>
			<td>Northeast</td>
			<td>NE</td>
		</tr>
		<tr>
			<td>4.</td>
			<td>Timur Timur Laut</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-202.5'></span></td>
			<td>East Northeast</td>
			<td>ENE</td>
		</tr>
		<tr>
			<td>5.</td>
			<td>Timur</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-225'></span></td>
			<td>East</td>
			<td>E</td>
		</tr>
		<tr>
			<td>6.</td>
			<td>Timur Tenggara</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-247.5'></span></td>
			<td>East Southeast</td>
			<td>ESE</td>
		</tr>
		<tr>
			<td>7.</td>
			<td>Tenggara</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-270'></span></td>
			<td>Southeast</td>
			<td>SE</td>
		</tr>
		<tr>
			<td>8.</td>
			<td>Selatan Tenggara</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-292.5'></span></td>
			<td>South Southeast</td>
			<td>SSE</td>
		</tr>
		<tr>
			<td>9.</td>
			<td>Selatan</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-315'></span></td>
			<td>South</td>
			<td>S</td>
		</tr>
		<tr>
			<td>10.</td>
			<td>Selatan Barat Daya</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-337.5'></span></td>
			<td>South Southwest</td>
			<td>SSW</td>
		</tr>
		<tr>
			<td>11.</td>
			<td>Barat Daya</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-360'></span></td>
			<td>Southwest</td>
			<td>SW</td>
		</tr>
		<tr>
			<td>12.</td>
			<td>Barat Barat Daya</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-382.5'></span></td>
			<td>West Southwest</td>
			<td>WSW</td>
		</tr>
		<tr>
			<td>13.</td>
			<td>Barat</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-405'></span></td>
			<td>West</td>
			<td>W</td>
		</tr>
		<tr>
			<td>14.</td>
			<td>Barat Barat Laut</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-427.5'></span></td>
			<td>West Northwest</td>
			<td>WNW</td>
		</tr>
		<tr>
			<td>15.</td>
			<td>Barat Laut</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-450'></span></td>
			<td>Northwest</td>
			<td>NW</td>
		</tr>
		<tr>
			<td>16.</td>
			<td>Utara Barat Laut</td>
			<td><span class='fa fa-location-arrow' data-fa-transform='rotate-472.5'></span></td>
			<td>North Northwest</td>
			<td>NNW</td>
		</tr>
</table>

							
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
					
			</div>
		</div>
		<br/>
		<div class="row" id="weather">
			
		</div>
	</div>
	<script>
		function DateTimeClock() {
					var now     = new Date();
					var year    = now.getFullYear();
					var day     = now.getDate();
					var hour    = now.getHours();
					var minute  = now.getMinutes();
					var second  = now.getSeconds();
					var weekday = new Array(7);
					weekday[0] = "Sunday";
					weekday[1] = "Monday";
					weekday[2] = "Tuesday";
					weekday[3] = "Wednesday";
					weekday[4] = "Thursday";
					weekday[5] = "Friday";
					weekday[6] = "Saturday";
					var month = new Array();
					month[0] = "January";
					month[1] = "February";
					month[2] = "March";
					month[3] = "April";
					month[4] = "May";
					month[5] = "June";
					month[6] = "July";
					month[7] = "August";
					month[8] = "September";
					month[9] = "October";
					month[10] = "November";
					month[11] = "December";
					var bulan= month[now.getMonth()];
					var hari = weekday[now.getDay()];
					if(day.toString().length == 1) {
						day = '0'+day;
					}
					if(hour.toString().length == 1) {
						hour = '0'+hour;
					}
					if(minute.toString().length == 1) {
						minute = '0'+minute;
					}
					if(second.toString().length == 1) {
						second = '0'+second;
					}
					var dateTime = hari+', '+day+' '+bulan+' '+year+' '+hour+':'+minute+':'+second;
					return dateTime;
				}
				// example usage: realtime clock
				setInterval(function(){
					currentTime = DateTimeClock();
					document.getElementById("digital-clock").innerHTML = currentTime;
				}, 1000);
	</script>
</body>
</html>